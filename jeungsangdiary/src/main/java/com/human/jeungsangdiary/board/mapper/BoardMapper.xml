<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.human.jeungsangdiary.board.mapper.BoardMapper">
    
    <!-- 게시글 목록 -->
    <select id="selectBoardList" resultType="com.human.jeungsangdiary.board.domain.Board">
        SELECT 
            UNQ_ID as unqId,
            USER_ID as userId,
            TITLE,
            HIT,
            TO_CHAR(WRITE_DATE, 'yyyy-MM-dd') as writeDate
        FROM
            boards
        ORDER BY unqId DESC
        OFFSET 10*(#{page}-1) ROWS FETCH NEXT 10 ROWS ONLY
    </select>

    <!-- 게시글 총갯수 -->
	<select id="selectTotalBoard" resultType="int">
		SELECT COUNT(*) FROM boards
	</select>
	
	<!-- 게시글 읽기 -->
	<select id="selectBoardOne" resultType="com.human.jeungsangdiary.board.domain.Board">
		SELECT * FROM boards WHERE UNQ_ID = #{UNQ_ID}
	</select>

    <!-- 게시글 쓰기 -->
    <insert id="insertBoard">
        INSERT INTO boards (
                            UNQ_ID,
                            TITLE,
                            CONTENT,
                            HIT
                        ) VALUES (
                            BOARD_SEQ.NEXTVAL,
                            #{title},
                            #{content},
                            #{hit}
                        )
    </insert>

    <!-- 조회수 업데이트 -->
    <update id="updateBoardHit">
		UPDATE boards SET hit=hit+1 WHERE UNQ_ID = #{UNQ_ID}
	</update>

    <!-- 게시글 삭제 -->
	<delete id="deleteBoardOne">
		DELETE FROM boards WHERE UNQ_ID = #{UNQ_ID}
	</delete>

</mapper>